{"ast":null,"code":"export default {\n  data() {\n    return {\n      orders: [{\n        orderName: '订单1',\n        orderAmount: 100,\n        customerName: '客户A',\n        latitude: 39.9042,\n        // 订单的起始纬度信息\n        longitude: 116.4074,\n        // 订单的起始经度信息\n        destination: {\n          latitude: 31.2304,\n          // 订单的目的地纬度信息\n          longitude: 121.4737 // 订单的目的地经度信息\n        },\n\n        routePolyline: null,\n        // 用于存储路线的折线对象\n        marker: null // 用于存储标记的对象\n      }\n      // 其他订单数据...\n      ],\n\n      dialogVisible: false,\n      selectedOrder: {}\n    };\n  },\n  mounted() {\n    this.initMap();\n  },\n  methods: {\n    viewOrder(order) {\n      this.selectedOrder = order;\n      this.dialogVisible = true;\n    },\n    showRoute(order) {\n      const {\n        latitude,\n        longitude,\n        destination\n      } = order;\n      const map = new AMap.Map('mapContainer', {\n        center: [longitude, latitude],\n        zoom: 12\n      });\n      AMap.plugin(['AMap.Driving'], () => {\n        const driving = new AMap.Driving({\n          map: map\n        });\n        driving.search(new AMap.LngLat(longitude, latitude), new AMap.LngLat(destination.longitude, destination.latitude), (status, result) => {\n          if (status === 'complete') {\n            const path = result.routes[0].path;\n\n            // 更新订单的路线信息\n            order.routePolyline = new AMap.Polyline({\n              path: path,\n              strokeColor: '#FF0000',\n              strokeOpacity: 0.8,\n              strokeWeight: 5,\n              map: map\n            });\n\n            // 更新订单的标记位置\n            order.marker = new AMap.Marker({\n              position: new AMap.LngLat(longitude, latitude),\n              map: map,\n              icon: 'https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png' // 自定义标记图标\n            });\n          }\n        });\n      });\n    },\n\n    initMap() {\n      const script = document.createElement('script');\n      script.src = 'https://webapi.amap.com/maps?v=2.0&key=7e7c1d5b0e5e55e2689d0bdc9d5af47c&plugin=AMap.Driving';\n      script.async = true;\n      script.onload = () => {\n        this.showRoute(this.orders[0]); // 显示第一个订单的路线和标记\n      };\n\n      document.head.appendChild(script);\n    }\n  }\n};","map":{"version":3,"names":["data","orders","orderName","orderAmount","customerName","latitude","longitude","destination","routePolyline","marker","dialogVisible","selectedOrder","mounted","initMap","methods","viewOrder","order","showRoute","map","AMap","Map","center","zoom","plugin","driving","Driving","search","LngLat","status","result","path","routes","Polyline","strokeColor","strokeOpacity","strokeWeight","Marker","position","icon","script","document","createElement","src","async","onload","head","appendChild"],"sources":["src/components/TransOrder.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-card>\r\n      <div slot=\"header\" class=\"card-header\">正在运输的订单</div>\r\n      <div id=\"mapContainer\" style=\"height: 400px\"></div>\r\n      <el-table :data=\"orders\" style=\"width: 100%\">\r\n        <el-table-column prop=\"orderName\" label=\"订单名称\"></el-table-column>\r\n        <el-table-column prop=\"orderAmount\" label=\"订单金额\"></el-table-column>\r\n        <el-table-column prop=\"customerName\" label=\"客户姓名\"></el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"text\" @click=\"viewOrder(scope.row)\">查看</el-button>\r\n            <el-button type=\"text\" @click=\"showRoute(scope.row)\">查看路线</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n    <el-dialog :visible=\"dialogVisible\" @close=\"dialogVisible = false\">\r\n      <span>{{ selectedOrder.orderName }}</span>\r\n      <span>{{ selectedOrder.orderAmount }}</span>\r\n      <span>{{ selectedOrder.customerName }}</span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      orders: [\r\n        {\r\n          orderName: '订单1',\r\n          orderAmount: 100,\r\n          customerName: '客户A',\r\n          latitude: 39.9042, // 订单的起始纬度信息\r\n          longitude: 116.4074, // 订单的起始经度信息\r\n          destination: {\r\n            latitude: 31.2304, // 订单的目的地纬度信息\r\n            longitude: 121.4737 // 订单的目的地经度信息\r\n          },\r\n          routePolyline: null, // 用于存储路线的折线对象\r\n          marker: null // 用于存储标记的对象\r\n        },\r\n        // 其他订单数据...\r\n      ],\r\n      dialogVisible: false,\r\n      selectedOrder: {}\r\n    };\r\n  },\r\n  mounted() {\r\n    this.initMap();\r\n    \r\n  },\r\n  methods: {\r\n    viewOrder(order) {\r\n      this.selectedOrder = order;\r\n      this.dialogVisible = true;\r\n    },\r\n    showRoute(order) {\r\n      const { latitude, longitude, destination } = order;\r\n\r\n      const map = new AMap.Map('mapContainer', {\r\n        center: [longitude, latitude],\r\n        zoom: 12\r\n      });\r\n\r\n      AMap.plugin(['AMap.Driving'], () => {\r\n        const driving = new AMap.Driving({\r\n          map: map\r\n        });\r\n\r\n        driving.search(\r\n          new AMap.LngLat(longitude, latitude),\r\n          new AMap.LngLat(destination.longitude, destination.latitude),\r\n          (status, result) => {\r\n            if (status === 'complete') {\r\n              const path = result.routes[0].path;\r\n\r\n              // 更新订单的路线信息\r\n              order.routePolyline = new AMap.Polyline({\r\n                path: path,\r\n                strokeColor: '#FF0000',\r\n                strokeOpacity: 0.8,\r\n                strokeWeight: 5,\r\n                map: map\r\n              });\r\n\r\n              // 更新订单的标记位置\r\n              order.marker = new AMap.Marker({\r\n                position: new AMap.LngLat(longitude, latitude),\r\n                map: map,\r\n                icon: 'https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png' // 自定义标记图标\r\n              });\r\n            }\r\n          }\r\n        );\r\n      });\r\n    },\r\n    initMap() {\r\n      const script = document.createElement('script');\r\n      script.src = 'https://webapi.amap.com/maps?v=2.0&key=7e7c1d5b0e5e55e2689d0bdc9d5af47c&plugin=AMap.Driving';\r\n      script.async = true;\r\n      script.onload = () => {\r\n        this.showRoute(this.orders[0]); // 显示第一个订单的路线和标记\r\n      };\r\n      document.head.appendChild(script);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.card-header {\r\n  background-color: #f5f7fa;\r\n  padding: 15px;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  border-bottom: 1px solid #ebeef5;\r\n}\r\n\r\n#mapContainer {\r\n  margin-top: 20px;\r\n}\r\n</style>\r\n"],"mappings":"AA0BA;EACAA,KAAA;IACA;MACAC,MAAA,GACA;QACAC,SAAA;QACAC,WAAA;QACAC,YAAA;QACAC,QAAA;QAAA;QACAC,SAAA;QAAA;QACAC,WAAA;UACAF,QAAA;UAAA;UACAC,SAAA;QACA;;QACAE,aAAA;QAAA;QACAC,MAAA;MACA;MACA;MAAA,CACA;;MACAC,aAAA;MACAC,aAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,OAAA;EAEA;EACAC,OAAA;IACAC,UAAAC,KAAA;MACA,KAAAL,aAAA,GAAAK,KAAA;MACA,KAAAN,aAAA;IACA;IACAO,UAAAD,KAAA;MACA;QAAAX,QAAA;QAAAC,SAAA;QAAAC;MAAA,IAAAS,KAAA;MAEA,MAAAE,GAAA,OAAAC,IAAA,CAAAC,GAAA;QACAC,MAAA,GAAAf,SAAA,EAAAD,QAAA;QACAiB,IAAA;MACA;MAEAH,IAAA,CAAAI,MAAA;QACA,MAAAC,OAAA,OAAAL,IAAA,CAAAM,OAAA;UACAP,GAAA,EAAAA;QACA;QAEAM,OAAA,CAAAE,MAAA,CACA,IAAAP,IAAA,CAAAQ,MAAA,CAAArB,SAAA,EAAAD,QAAA,GACA,IAAAc,IAAA,CAAAQ,MAAA,CAAApB,WAAA,CAAAD,SAAA,EAAAC,WAAA,CAAAF,QAAA,GACA,CAAAuB,MAAA,EAAAC,MAAA;UACA,IAAAD,MAAA;YACA,MAAAE,IAAA,GAAAD,MAAA,CAAAE,MAAA,IAAAD,IAAA;;YAEA;YACAd,KAAA,CAAAR,aAAA,OAAAW,IAAA,CAAAa,QAAA;cACAF,IAAA,EAAAA,IAAA;cACAG,WAAA;cACAC,aAAA;cACAC,YAAA;cACAjB,GAAA,EAAAA;YACA;;YAEA;YACAF,KAAA,CAAAP,MAAA,OAAAU,IAAA,CAAAiB,MAAA;cACAC,QAAA,MAAAlB,IAAA,CAAAQ,MAAA,CAAArB,SAAA,EAAAD,QAAA;cACAa,GAAA,EAAAA,GAAA;cACAoB,IAAA;YACA;UACA;QACA,CACA;MACA;IACA;;IACAzB,QAAA;MACA,MAAA0B,MAAA,GAAAC,QAAA,CAAAC,aAAA;MACAF,MAAA,CAAAG,GAAA;MACAH,MAAA,CAAAI,KAAA;MACAJ,MAAA,CAAAK,MAAA;QACA,KAAA3B,SAAA,MAAAhB,MAAA;MACA;;MACAuC,QAAA,CAAAK,IAAA,CAAAC,WAAA,CAAAP,MAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}